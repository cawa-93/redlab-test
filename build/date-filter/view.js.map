{"version":3,"file":"date-filter/view.js","mappings":";;;;;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EACnDD,QAAQ,CAACE,IAAI,CAACC,gBAAgB,CAAC,qCAAqC,CAAC,CAACC,OAAO,CAACC,YAAY,IAAI;IAC7F,MAAMC,cAAc,GAAGD,YAAY,CAACE,OAAO,CAAC,iBAAiB,CAAC;IAE9D,IAAI,EAAED,cAAc,YAAYE,WAAW,CAAC,EAAE;MAC7C;IACD;IAEAC,IAAI,CAACJ,YAAY,EAAEC,cAAc,CAAC;EACnC,CAAC,CAAC;AAEH,CAAC,CAAC;;AAGF;AACA;AACA;AACA;AACA;AACA,SAASG,IAAIA,CAACJ,YAAY,EAAEC,cAAc,EAAE;EAC3CD,YAAY,CAACF,gBAAgB,CAAC,OAAO,CAAC,CAACC,OAAO,CAACM,EAAE,IAAI;IACpDA,EAAE,CAACT,gBAAgB,CAAC,QAAQ,EAAE,MAAM;MACnCU,SAAS,CAAC,CAAC;IACZ,CAAC,CAAC;EACH,CAAC,CAAC;EAGF,SAASA,SAASA,CAAA,EAAG;IACpB;IACA,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAAC,CAAC;IACrBR,YAAY,CAACF,gBAAgB,CAAC,eAAe,CAAC,CAACC,OAAO,EAAC,yCAA0CU,QAAQ,IAAK;MAE7G;MACA,MAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAK;MAC5B;MACA,MAAMC,IAAI,GAAGF,QAAQ,CAACG,OAAO,CAACC,UAAU;MAExC,QAAQF,IAAI;QACX,KAAK,MAAM;UACV,IAAI,CAACJ,GAAG,CAACO,GAAG,CAACJ,KAAK,CAAC,EAAE;YACpBH,GAAG,CAACQ,GAAG,CAACL,KAAK,EAAE,EAAE,CAAC;UACnB;UACA;QACD,KAAK,OAAO;UACX,MAAMM,IAAI,GAAGP,QAAQ,CAACG,OAAO,CAACK,UAAU;UACxCV,GAAG,CAACQ,GAAG,CAACC,IAAI,EAAE,CAAC,IAAIT,GAAG,CAACW,GAAG,CAACF,IAAI,CAAC,IAAI,EAAE,CAAC,EAAEN,KAAK,CAAC,CAAC;UAChD;MACF;IACD,CAAC,CAAC;IAEF,MAAMS,GAAG,GAAG,IAAIC,GAAG,CAACC,QAAQ,CAACC,IAAI,CAAC;IAClC,MAAMC,IAAI,GAAGC,MAAM,CAACC,WAAW,CAAClB,GAAG,CAACmB,OAAO,CAAC,CAAC,CAAC;IAC9C,IAAIF,MAAM,CAACG,IAAI,CAACJ,IAAI,CAAC,CAACK,MAAM,EAAE;MAC7BT,GAAG,CAACU,YAAY,CAACd,GAAG,CAAC,YAAY,EAAEe,kBAAkB,CAACC,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAC,CAAC;IAC7E,CAAC,MAAM;MACNJ,GAAG,CAACU,YAAY,CAACI,MAAM,CAAC,YAAY,CAAC;IACtC;IAEAZ,QAAQ,CAACC,IAAI,GAAGH,GAAG;EACpB;EAEAe,OAAO,CAACC,GAAG,CAAC;IAACnC,YAAY;IAAEC;EAAc,CAAC,CAAC;AAC5C,C","sources":["webpack://events/./src/date-filter/view.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\tdocument.body.querySelectorAll('.wp-block-events-plugin-date-filter').forEach(blockElement => {\n\t\tconst queryContainer = blockElement.closest('.wp-block-query')\n\n\t\tif (!(queryContainer instanceof HTMLElement)) {\n\t\t\treturn\n\t\t}\n\n\t\tinit(blockElement, queryContainer)\n\t})\n\n})\n\n\n/**\n *\n * @param {HTMLElement} blockElement\n * @param {HTMLElement} queryContainer\n */\nfunction init(blockElement, queryContainer) {\n\tblockElement.querySelectorAll('input').forEach(el => {\n\t\tel.addEventListener('change', () => {\n\t\t\tupdateURL();\n\t\t})\n\t})\n\n\n\tfunction updateURL() {\n\t\t/** @type {Map<string, string[]>} */\n\t\tconst map = new Map();\n\t\tblockElement.querySelectorAll('input:checked').forEach(/** @param {HTMLInputElement} checkbox */(checkbox) => {\n\n\t\t\t/** @type {string} */\n\t\t\tconst value = checkbox.value\n\t\t\t/** @type {'year' | 'month'} */\n\t\t\tconst type = checkbox.dataset.filterType\n\n\t\t\tswitch (type) {\n\t\t\t\tcase \"year\":\n\t\t\t\t\tif (!map.has(value)) {\n\t\t\t\t\t\tmap.set(value, [])\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"month\":\n\t\t\t\t\tconst year = checkbox.dataset.filterYear\n\t\t\t\t\tmap.set(year, [...(map.get(year) || []), value])\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t})\n\n\t\tconst url = new URL(location.href)\n\t\tconst data = Object.fromEntries(map.entries())\n\t\tif (Object.keys(data).length) {\n\t\t\turl.searchParams.set('date_query', encodeURIComponent(JSON.stringify(data)))\n\t\t} else {\n\t\t\turl.searchParams.delete('date_query')\n\t\t}\n\n\t\tlocation.href = url\n\t}\n\n\tconsole.log({blockElement, queryContainer})\n}\n"],"names":["document","addEventListener","body","querySelectorAll","forEach","blockElement","queryContainer","closest","HTMLElement","init","el","updateURL","map","Map","checkbox","value","type","dataset","filterType","has","set","year","filterYear","get","url","URL","location","href","data","Object","fromEntries","entries","keys","length","searchParams","encodeURIComponent","JSON","stringify","delete","console","log"],"sourceRoot":""}